BigWebthing is a system for creating and exchanging documents over the internet.

# Client cache

handshake states
    - first half of KK1
    - 80 bytes: encoded handshake state

static keys
    32 bytes: public key
    32 bytes: secret key

# Server cache

static key pair
    32 bytes: public key
    32 bytes: secret key

contacts added
    32 bytes: contactee
    32 bytes: contacter
    added or removed

payments
    64 bytes: signature
    amount in pence
    32 bytes: payer

KK1s
    32 bytes: sender
    32 bytes: recipient
    24 bytes: first half of KK1
    24 bytes: second half of KK1

KK2s
    32 bytes: sender
    32 bytes: recipient
    24 bytes: first half of KK1
    48 bytes: KK2

KK transports
    32 bytes: sender
    32 bytes: recipient
    24 bytes: first half of KK1
    92 bytes: KK transport

blobs
    24 bytes: blob ID
    <= 15962 bytes: blob

# Client to server ciphertexts

48 bytes: XX1

64 bytes: XX3

transport

# Server to client ciphertexts

96 bytes: XX2

transport

# Client / server transport message

<= 16KB
    2 bytes: size
    36 bytes: crypto header
    <= 15962 bytes: encrypted
        33 bytes: added contact
            1 byte: 0
            32 bytes: contact public key
        33 bytes: removed contact
            1 byte: 1
            32 bytes: contact public key
        37 bytes: payment
            1 byte: 2
            64 bytes: signature
            4 bytes: amount in pence
        81 bytes: KK1
            1 byte: 3
            32 bytes: recipient
            48 bytes: KK1
        105 bytes: KK2
            1 byte: 4
            32 bytes: recipient
            24 bytes: first half of KK1
            48 bytes: KK2
        125 bytes: transport
            1 byte: 5
            32 bytes: recipient
            36 bytes: crypto overhead
            56 bytes: encrypted
                24 bytes: blob ID
                32 bytes: secret key of blob
        <= 15962 bytes: blob
            1 byte: 6
            24 bytes: blob ID
            <= 15937 bytes: encrypted blob
                36 bytes: crypto header
                15901 bytes: encrypted: one of
                    final message in sequence
                        1 byte: 0
                        24 bytes: checksum of whole file
                        <= 15876 bytes: the blob
                    not the final message
                        1 byte: 1
                        24 bytes: ID of next blob
                        15876 bytes: the blob
